<!DOCTYPE html>
<html lang="zh">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
  <meta content="yes" name="apple-mobile-web-app-capable" />
  <meta content="telephone=no" name="format-detection" />

  <title>苏州同济医院_同济官网在线预约</title>
  <link href="layout.css" rel="stylesheet" type="text/css" />
  <script src="js/jquery.min.js"></script>
  <script src="js/TouchSlide.1.1.js"></script>
  <script src="js/rem.js"></script>
  <style>
    body {
      padding-bottom: 0;
    }

    table {
      table-layout: fixed;
      width: 100%;
      text-align: center;
      border-top: 1px solid #d5e5e8;
      font-weight: 700;
      font-size: 1rem;
      background: #f4fafa;
    }

    caption {
      padding: 1rem 0;
      background: #00927f;
      font-size: 1.5rem;
      color: #fff;
    }

    tr {
      border-bottom: 1px solid #d5e5e8;
    }

    tr.odd td {
      border-top: 1px solid #d5e5e8;
    }


    th {
      background: #3fbabf;
      color: #fff;
    }

    th:nth-child(1),
    th:nth-child(2) {
      background: #f4fafa;
      color: #222;
    }

    th:nth-child(1) {
      text-align: right;
      width: 5rem;
      border-right: 0;
    }

    th:nth-child(2) {
      width: 2.5rem;
    }

    th,
    td {
      padding: .2rem 0;
      height: 1.8rem;
      line-height: 1.2;
      border-right: 1px solid #d5e5e8;
      word-break: keep-all;
    }

    td:last-child {
      border-right: 0;
    }

    td a {
      color: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    td span {
      font-weight: normal;
      display: inline-block;
      word-break: break-all;
      font-size: 1rem;
      transform: scale(0.5);
      line-height: 1.2rem;
      width: 200%;
      margin-top: -0.4rem;
    }


    .allied {
      margin: 0;
      width: 100%;
      padding-bottom: 0;
    }

    #myTable td:nth-child(1) {
      width: 5rem;
    }

    #myTable td:nth-child(2) {
      width: 2.5rem;
    }

    .list .hd {
      display: none;
    }

    .list .bd li {
      overflow: hidden;
      padding: 1.5rem .9rem 1.2rem .6rem;
      border-top: 1px dotted #00927f;
    }

    .list .bd img {
      float: left;
      width: 4.5rem;
      height: 4.5rem;
    }

    .list .bd .z-c {
      float: right;
      width: 80%;
    }

    .list .bd .z-c h5 {
      font-size: 1.05rem;
      font-weight: normal;
    }

    .list .bd .z-c h5 span {
      font-size: 1.4rem;
      color: #00927f;
    }

    .list .bd .z-c p {
      width: 81.5%;
      margin-top: 0.3rem;
      font-size: 0.9rem;
      line-height: 1.4rem;
    }

    .list .bd .yybtn {
      float: right;
      display: block;
      margin-top: 1.2rem;
      padding: 0 .3rem;
      height: 1.5rem;
      line-height: 1.5rem;
      text-align: center;
      background: #00927f;
      color: #fff;
      border-radius: 4px;
      font-size: 0.8rem;
    }
  </style>
</head>

<body class="index">
  <header>
    <!-- <img src="./images/logo_xcx.jpg" alt="" /> -->
    <img id="header" src="./images/ptmz_02.jpg" alt="" />
  </header>
  <table id="myTable">
    <caption>同济医院特聘专家出诊信息</caption>
    <tr class="odd">
      <th>
        <div class="tks">科室</div>
      </th>
      <th></th>
      <th>星期一</th>
      <th>星期二</th>
      <th>星期三</th>
      <th>星期四</th>
      <th>星期五</th>
      <th>星期六</th>
      <th>星期日</th>
    </tr>
  </table>
  <div class="list" id="tabBox">
    <div class="hd">
      <ul>
        <li></li>
      </ul>
    </div>
    <div class="bd"></div>
  </div>
  <img class="allied" src="./images/bottom.png" alt="" />
  <script src="./js/zjList.js"></script>
  <script src="./js/zj.js"></script>
  <script>
    var url = window.location.href
    var dz_url = url.split('#')[0] //获取#之前的字符串
    var cs = dz_url.split('?')[1] //获取?之后的参数字符串
    if (cs) {
      var cs_arr = cs.split('&') //参数字符串分割为数组
      var cs = {}
      for (var i = 0; i < cs_arr.length; i++) {
        cs[cs_arr[i].split('=')[0]] = cs_arr[i].split('=')[1]
      }
    } else { cs = {} }
    $('#header').attr("src", './images/ks/' + cs.ks + '.jpg?' + Math.random())
    var keShi;
    switch (cs.ks) {
      case 'xh': keShi = "消化内科"; break;
      case 'sn': keShi = "神经内科"; break;
      case 'hx': keShi = "呼吸科 /肺科"; break;
      case 'zl': keShi = "肿瘤科"; break;
      case 'nfm': keShi = "肾病/ 内分泌科"; break;
      case 'xnk': keShi = "心内科"; break;
      case 'pw': keShi = "普外科"; break;
      case 'gc': keShi = "肛肠科"; break;
      case 'rx': keShi = "乳腺科"; break;
      case 'fk': keShi = "妇科"; break;
      case 'nk': keShi = "泌尿外科"; break;
      case 'gk': keShi = "骨科"; break;
      case 'grk': keShi = "肝胆内科"; break;
      case 'zyk': keShi = "中医科"; break;
      case 'kfk': keShi = "康复科"; break;
      case 'fsmyk': keShi = "风湿免疫科"; break;
      case 'jzk': keShi = "全科医学"; break;
      case 'yk': keShi = "眼科"; break;
    }

    function goZj(zj) {
      window.location.href = '/gh/index_tx.html?tag=' + cs.tag + '&zj=' + zj
    }

    // 表格部分
    function week() {
      var c = ''
      for (var d = 1; d <= 7; d++) {
        c += '<td class="week_' + d + '"></td>'
      }
      return c
    }
    for (var i = 0; i < department.length; i++) {
      if (department[i] == keShi) {
        var tableC =
          '<tr id="am_' + i + '"><td rowspan="2" >' + department[i]
          + '</td><td>上午</td>' + week() + '</tr>'
          + '<tr class="odd" id="pm_' + i + '"><td>下午</td>' + week() + '</tr>'
        $('#myTable').append(tableC)
        var zjLists;
        for (zjLists in zjList) {
          var zjs = zjList[zjLists]
          //如果存在排班且科室相符
          if (zjs[4] && department[i] == zjs[1]) {
            var textHtml = '<a href="/gh/index_tx.html?tag=' + cs.tag + '&zj=' + zjLists + '">' +
              zjs[0] + '<br><span>' + zjs[5] + '</span></a>'
            var hDay = zjs[3]
            if (hDay.indexOf('上午') != -1 || hDay.indexOf('下午') != -1) {
              var zjWeek = parseInt(zjs[4])
              var zDays = zjs[4].split(';')
              var NumA = $('#am_' + i).children('td')
              var NumB = $('#pm_' + i).children('td')
              if (zDays.length > 1) {
                for (var d = 0; d < zDays.length; d++) {
                  zjWeek = parseInt(zDays[d])
                  if (hDay.split('/').length > 1) {
                    if (d == 0) {
                      isAPm(hDay, NumA[zjWeek + 1], '上午', textHtml)
                    } else if (d == 1) {
                      isAPm(hDay, NumB[zjWeek], '下午', textHtml)
                    }
                  } else {
                    isAPm(hDay, NumA[zjWeek + 1], '上午', textHtml)
                    isAPm(hDay, NumB[zjWeek], '下午', textHtml)
                  }
                }
              } else {
                isAPm(hDay, NumA[zjWeek + 1], '上午', textHtml)
                isAPm(hDay, NumB[zjWeek], '下午', textHtml)
              }
            }
          } else if (department[i] == zjs[1]) {
            //科室相符未排班，隐藏
            $('#am_' + i).hide()
            $('#pm_' + i).hide()
          }
        }
      }
    }
    function isAppend(Num, textHtml) {
      //一个半日内有两位坐诊专家则追加
      if (!Num.innerHTML) {
        Num.innerHTML = textHtml
      } else {
        $(textHtml).appendTo(Num)
      }
    }
    function isAPm(hDay, Num, text, textHtml) {
      if (hDay.indexOf(text) != -1) {
        isAppend(Num, textHtml)
      }
    }
    //专家列表
    var pageData = [];
    var zj;
    for (zj in profile) {
      if (profile[zj].department == keShi) {
        pageData.push(profile[zj]);
      }
    }
    var Count = pageData.length;//记录条数
    var PageSize = 4;//设置每页示数目
    var PageCount = Math.ceil(Count / PageSize);//计算总页数
    var currentPage = 1;//当前页，默认为1。
    for (var p = 1; p <= PageCount; p++) {
      $('#tabBox .bd').append('<div class="page_' + p + '"><ul></ul></div>');
      for (var i = (p - 1) * PageSize; i < PageSize * p; i++) {
        if (pageData[i]) {
          var li =
            ' <li onclick="goZj(\'' + pageData[i].pinyin + '\')">'
            + ' <img src="./zjimg/tx/' + pageData[i].pinyin + '.png" alt="">'
            + ' <div class="z-c">'
            + '  <h5><span>' + pageData[i].name + '</span> ' + pageData[i].title + '<br>' + pageData[i].hospital + '</h5>'
            + ' <div class="yybtn">预约挂号</div>'
            + '  <p>' + pageData[i].sSkilled + '…【详细】</p>'
            + ' </div>'
            + '  </li>'
          $('#tabBox .page_' + p + ' ul').append(li);
        }
      }
    }
  </script>
  <script type="text/javascript">
    TouchSlide({
      slideCell: "#tabBox", effect: "leftLoop", autoPlay: true, interTime: 3000, autoPage: true,
    }); 
  </script>
</body>

</html>